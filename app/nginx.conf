server {
    listen 8080;
    server_name _;
    
    root /usr/share/nginx/html;
    index index.html;
    
    # アセットロケーション（/assets/ で直接アクセス可能）
    location /assets/ {
        expires off;
        add_header Cache-Control "no-cache, no-store, must-revalidate" always;
    }
    
    # GitHub Pages用パスでのアクセスもサポート（パス書き換え）
    location ~ ^/tech-role-site/assets/(.*)$ {
        try_files /assets/$1 =404;
        expires off;
        add_header Cache-Control "no-cache, no-store, must-revalidate" always;
    }
    
    # SPA用のリダイレクト（全パスで index.html を配信）
    location / {
        try_files $uri /index.html;
        add_header Cache-Control "no-cache, no-store, must-revalidate" always;
    }
    
    # GZip圧縮
    gzip on;
    gzip_types text/plain text/css text/javascript application/json application/javascript;
}
